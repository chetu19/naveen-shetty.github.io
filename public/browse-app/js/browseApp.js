angular.module("productApp",["ui.router"]).config(["$stateProvider",function(t){t.state("pdp",{url:"/pdp/:productId",templateUrl:"product/partials/product.html",controller:"ProductController"})}]),angular.module("browseApp",["internalApps","vendorApps"]).run(["$rootScope","$state","$stateParams",function(t,r,n){t.$state=r,t.$stateParams=n}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,r,n){r.otherwise("/pdp/dummy-pid")}]),angular.module("addToCart",[]).directive("atcButton",["$modal",function(t){return{restrict:"EA",replace:!0,template:'<button type="button" class="btn btn-danger btn-atc" ng-click="doATC()">ADD TO CART</button>',scope:{image:"=img",qty:"=qty",title:"=title"},link:function(r,n,a){r.doATC=function(){var n={image:r.image,qty:r.qty,title:r.title};r.prd=n;t.open({templateUrl:"addtocart/confirmAtc.html",scope:r})}}}}]),function(){var t;try{t=angular.module("templateCache")}catch(r){t=angular.module("templateCache",[])}t.run(["$templateCache",function(t){t.put("addtocart/confirmAtc.html",'<div class="atc-confirm ">\r\n    <div class="row">\r\n        <div class="col-xs-9 col-md-9 ">\r\n            <span ng-bind="prd.qty+\' item added to cart\'"> </span>\r\n            <a class="view-cart">\r\n                <span >View your cart</span>\r\n            </a>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3 pull-right close-atc" >\r\n            <span class="close-atc glyphicon glyphicon-remove" ng-click="$close()"></span>\r\n        </div>\r\n    </div>\r\n     <div class="row ">\r\n        <div  class="cart-image col-xs-12 col-md-12">\r\n            <img ng-src="{{prd.image}}"\r\n                 alt="{{prd.title}}"\r\n                 title="{{prd.title}}"\r\n                 width="106" height="106">\r\n        </div>\r\n        <div class="tile-info col-xs-12 col-md-12">\r\n            <a title="{{prd.title}}" ng-bind="prd.title"\r\n               class="productTitle">\r\n            </a>\r\n        </div>\r\n\r\n    </div>\r\n</div>')}])}(),angular.module("internalApps",["productApp","addToCart"]),angular.module("vendorApps",["ui.router","ngAnimate","templateCache","ui.bootstrap","pasvaz.bindonce"]),function(){var t;try{t=angular.module("templateCache")}catch(r){t=angular.module("templateCache",[])}t.run(["$templateCache",function(t){t.put("product/partials/product.html",'<div class="container pdp">\r\n    <!-- Row 1 (Product display and product controls section) : Starts -->\r\n    <div class="row">\r\n        <!-- Row 1, Col 1 (Product title and image container) : Starts -->\r\n        <div class="col-xs-12 col-md-6 contentRight primaryImgContainer">\r\n            <h2 class="product-name item">\r\n                    <span class="fn" ng-bind="productDetails.title">\r\n                    </span>\r\n            </h2>\r\n            <div ng-include="\'product/partials/productImage.html\'">\r\n            </div>\r\n        </div>\r\n        <!-- Row 1, Col 1 (Product title and image container) : Ends -->\r\n        <!-- Row 1, Col 2 (Product control section) : Starts -->\r\n        <div class="col-xs-12 col-md-6 primary-info">\r\n            <div class="row">\r\n                <div ng-include="\'product/partials/productOffers.html\'">\r\n                </div>\r\n                <div class="col-xs-12 atc-contaier" ng-include="\'product/partials/productFulfillment.html\'">\r\n                </div>\r\n                <div class="col-xs-12  prod-highlights" ng-include="\'product/partials/productHighlights.html\'">\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- Row 1, Col 2 (Product control section) : Ends -->\r\n    </div>\r\n    <!-- Row 1 (Product display and product controls section) : Ends -->\r\n    <!-- Row 2 (Product review section) : Starts -->\r\n    <div class="row">\r\n        <div class="col-xs-12 col-md-6 " ng-include="\'product/partials/productRatings.html\'">\r\n        </div>\r\n    </div>\r\n    <!-- Row 2 (Product review section) : Ends -->\r\n</div>')}])}(),function(){var t;try{t=angular.module("templateCache")}catch(r){t=angular.module("templateCache",[])}t.run(["$templateCache",function(t){t.put("product/partials/productFulfillment.html",'<div class="row pdp-ffm">\r\n    <div class="col-xs-12">\r\n        <div class="input-group qty-grp" >\r\n            <span class="input-group-addon">quantity:</span>\r\n            <span class="input-group-addon" ng-click="qty = productDetails.decrementNonZeroNonNegative(qty) ">\r\n                <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>\r\n            </span>\r\n            <input type="text" class="form-control" aria-label="" name ="product_qty" ng-model="qty" ng-init="qty=1"  >\r\n            <span class="input-group-addon" ng-click="qty = productDetails.increment(qty) ">\r\n                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>\r\n            </span>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="col-xs-12">\r\n        &nbsp;\r\n    </div>\r\n    <div class="col-xs-12">\r\n        <button type="button" class="btn btn-default btn-spu" ng-if="productDetails.enablePickUp">PICK UP IN STORE</button>\r\n        <button  atc-button qty="qty" img="productDetails.imageDetails.primImg.image"\r\n                 title="productDetails.title"\r\n                 ng-if="productDetails.enableAtc">ADD TO CART</button>\r\n    </div>\r\n    <div class="col-xs-12">\r\n        <div class="product-warnings">\r\n            <div class="warning-label">\r\n                returns\r\n            </div>\r\n            <ul>\r\n                <li id="extPackage" class="hidden"></li>\r\n                <li>\r\n                    <span>This item must be returned within 30 days of ship date. See return policy for details. Prices, promotions, styles and availability may vary by store and online.</span>\r\n                </li>\r\n                <li id="retPolicy" class="hidden"></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="col-xs-12">\r\n        <div class="btn-others">\r\n            <button class="btn btn-extra btn-atr" type="submit">ADD TO REGISTRY</button>\r\n\r\n            <button class="btn btn-extra btn-atl" type="submit">ADD TO LIST</button>\r\n\r\n            <button class="btn btn-extra btn-share" type="submit">SHARE</button>\r\n\r\n        </div>\r\n    </div>\r\n</div>')}])}(),function(){var t;try{t=angular.module("templateCache")}catch(r){t=angular.module("templateCache",[])}t.run(["$templateCache",function(t){t.put("product/partials/productHighlights.html",'<span>product highlights</span>\r\n<div class="features">\r\n    <ul >\r\n        <li bindonce ng-repeat=" feature in productDetails.features" bo-html="feature |trustAsHtml"></li>\r\n    </ul>\r\n</div>')}])}(),function(){var t;try{t=angular.module("templateCache")}catch(r){t=angular.module("templateCache",[])}t.run(["$templateCache",function(t){t.put("product/partials/productImage.html",'<div>\r\n    <div class="row">\r\n        <div class="col-xs-12">\r\n            <div id="hero" class="hero-img" >\r\n                    <a href="javascript:;">\r\n                        <img align="center" ng-if="productDetails.imageDetails.primImg"\r\n                             ng-src="{{productDetails.imageDetails.primImg.image}}" alt="">\r\n                    </a>\r\n                    <span class="screen-reader-only"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-xs-12">\r\n            <div id="prod-details-thumbs" ng-if="productDetails.imageDetails.altImgs.length > 1" class="prod-details-thumbs">\r\n                <div class="thumb-cntrls left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"\r\n                                                     ng-click="productDetails.prevTh()"></span>\r\n                </div>\r\n                <div class="thumb-container">\r\n                    <div ng-repeat="img in productDetails.imageDetails.altImgs" >\r\n                        <img class="thumb" ng-class="{selected: productDetails.imageDetails.selectedthInd ==$index }"\r\n                             ng-click="productDetails.changePrimaryImg( $index)" ng-src="{{img.image}}?hei=50&wid=50">\r\n                    </div>\r\n                </div>\r\n                <div class="thumb-cntrls right"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"\r\n                                                      ng-click="productDetails.nextTh()"></span></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n')}])}(),function(){var t;try{t=angular.module("templateCache")}catch(r){t=angular.module("templateCache",[])}t.run(["$templateCache",function(t){t.put("product/partials/productOffers.html",'<div id="price-main" class="col-xs-12 price-main">\r\n    <div class="offerprice">\r\n        <span class="price">\r\n            <span class="offerPrice" ng-bind="productDetails.offerPrice.formattedPriceValue"></span>\r\n        </span>\r\n        <span class="price lst-price">\r\n            <span class="eyebrow" id="eyebrow" ng-bind="productDetails.offerPrice.priceQualifier"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n<div class="col-xs-12">\r\n    <hr>\r\n</div>\r\n<div class="col-xs-12 promo">\r\n    <div class="rich-promo-item" ng-repeat="promo in productDetails.Promotions">\r\n        <!-- This should have been parsed in Service layer to avoid the below iteration: Used ng-repeat for ease in this POC-->\r\n        <div class="promo-text" ng-repeat="promoDesc  in promo.Description ">\r\n            <h3><span ng-bind="promoDesc.shortDescription"></span></h3>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="col-xs-12">\r\n    <hr>\r\n</div>')}])}(),function(){var t;try{t=angular.module("templateCache")}catch(r){t=angular.module("templateCache",[])}t.run(["$templateCache",function(t){t.put("product/partials/productRatings.html",'<div class="row star-rating">\r\n    <div class="col-xs-6 col-md-6 pull-left">\r\n        <div star-ratings  avg-rating="productDetails.customerReview.consolidatedOverallRating"></div>\r\n    </div>\r\n    <div class="col-xs-6 col-md-6 pull-right">\r\n        <div class="total-reviews">\r\n                view all <span ng-bind="productDetails.customerReview.totalReviews"></span> reviews\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row  reviews-wrapper">\r\n    <div class="col-xs-6 col-md-6">\r\n        <h4>PRO</h4>\r\n        <span class="rating-call-out">most helpful 4-5 star review</span>\r\n    </div>\r\n    <div class="col-xs-6 col-md-6">\r\n        <h4>CON</h4>\r\n        <span class="rating-call-out">most helpful 1-2 star review</span>\r\n    </div>\r\n    <div class="col-xs-12 col-md-12">\r\n        <hr>\r\n    </div>\r\n    <div class="col-xs-6 col-md-6">\r\n        <span ng-repeat="pro in productDetails.customerReview.Pro">\r\n            <span><strong ng-bind="pro.title"> </strong></span>\r\n            <br> <span ng-bind="pro.review"> </span>\r\n        </span>\r\n    </div>\r\n    <div class="col-xs-6 col-md-6">\r\n        <span ng-repeat="con in productDetails.customerReview.Con">\r\n            <span><strong ng-bind="con.title"> </strong></span>\r\n            <br> <span ng-bind="con.review"> </span>\r\n        </span>\r\n    </div>\r\n</div>')}])}(),angular.module("productApp").controller("ProductController",["$scope","$stateParams","productService",function(t,r,n){var a=function(){t.productDetails={},t.productDetails.id=r.productId,n.getProductDetails(t.productDetails.id).then(function(r){var n=r.data.productDetails;angular.isObject(n)&&(t.productDetails=n,t.productDetails.nextTh=i,t.productDetails.prevTh=e,t.productDetails.changePrimaryImg=s,t.productDetails.increment=l,t.productDetails.decrementNonZeroNonNegative=c)})},i=function(){var r=t.productDetails.imageDetails.altImgs.pop();t.productDetails.imageDetails.altImgs.unshift(r),s(0)},e=function(){var r=t.productDetails.imageDetails.altImgs.shift();t.productDetails.imageDetails.altImgs.push(r),s(0)},s=function(r){var n=angular.copy(t.productDetails.imageDetails.altImgs[r]);t.productDetails.imageDetails.primImg=n,t.productDetails.imageDetails.selectedthInd=r},l=function(t){return++t},c=function(t){return t--,1>t&&(t=1),t};a()}]),angular.module("productApp").directive("starRatings",[function(){return{restrict:"EA",template:'<div class="star-rating" ng-show="show" ng-bind-html="ratingHTML |trustAsHtml"></div>',scope:{avgRating:"="},link:function(t,r,n){t.$watch("avgRating",function(){if(t.show=!0,t.avgRating){for(var r='<span class="glyphicon glyphicon-star rating-star"></span>',n='<span class="glyphicon glyphicon-star half-star rating-star"></span>',a=Math.floor(t.avgRating),i="",e=0;a>e;e++)i+=r;t.rating%1!==0&&(i+=n),i+=" overall",t.ratingHTML=i}else t.show=!1})}}}]),angular.module("productApp").filter("trustAsHtml",["$sce",function(t){return function(r){var n=r;return n=t.trustAsHtml(r)}}]),angular.module("productApp").factory("productService",["$rootScope","$http",function(t,r){var n=function(t){return angular.isArray(t)&&t.length>0},a=function(t){var r,a={primImg:{},altImgs:[{}]},i=[];if(n(t)){var e=t[0].PrimaryImage;i=t[0].AlternateImages,n(e)&&(r=e[0]),n(i)&&angular.isUndefined(r)&&(r=i[0])}return a.primImg=r,a.altImgs=i,a},i=function(t){var r;if(n(t)){var a=t[0].OfferPrice;n(a)&&(r=a[0])}return r},e=function(t){var r={};return n(t)&&(r=t[0]),r},s=function(t){var r=[];return n(t)&&(r=t[0].features),r},l=function(t){var r=t.purchasingChannelCode,n=!0;return("0"===r||"1"===r)&&n},c=function(t){var r=t.purchasingChannelCode,n=!0;return("0"===r||"1"===r)&&n},o=function(t,r){return t=angular.isArray(t)?t:[t],t.concat(r)},d={getProductDetails:function(t){return r({url:"/browse-app/json/item-data.json",method:"GET",transformResponse:o(r.defaults.transformResponse,function(t){var r,o=t.CatalogEntryView;return n(o)&&(r=o[0],r.imageDetails=a(r.Images),r.offerPrice=i(r.Offers),r.customerReview=e(r.CustomerReview),r.enableAtc=l(r),r.enablePickUp=c(r),r.features=s(r.ItemDescription)),t.productDetails=r,t})})}};return d}]);